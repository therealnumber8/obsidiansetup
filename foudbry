{
	"nodes":[
		{
			"id":"group_governance",
			"type":"group",
			"styleAttributes":{},
			"x":-400,
			"y":-2560,
			"width":1340,
			"height":1980,
			"color":"1",
			"label":"üõ°Ô∏è GOVERNANCE & SECURITY SHIELD"
		},
		{
			"id":"group_compute",
			"type":"group",
			"styleAttributes":{},
			"x":800,
			"y":-200,
			"width":600,
			"height":1060,
			"color":"3",
			"label":"üß† COMPUTE & EXECUTION"
		},
		{
			"id":"group_devops",
			"type":"group",
			"styleAttributes":{},
			"x":-1000,
			"y":-100,
			"width":500,
			"height":800,
			"color":"5",
			"label":"üöÄ DEVELOPER SUPPLY CHAIN"
		},
		{
			"id":"group_foundry",
			"type":"group",
			"styleAttributes":{},
			"x":100,
			"y":-100,
			"width":500,
			"height":800,
			"color":"4",
			"label":"üè≠ MICROSOFT FOUNDRY CORE"
		},
		{
			"id":"group_gateway",
			"type":"group",
			"styleAttributes":{},
			"x":-400,
			"y":-100,
			"width":450,
			"height":800,
			"color":"6",
			"label":"‚õ©Ô∏è THE GATEKEEPER (AI GATEWAY)"
		},
		{
			"id":"group_backend",
			"type":"group",
			"styleAttributes":{},
			"x":1920,
			"y":-100,
			"width":450,
			"height":800,
			"color":"2",
			"label":"üíæ BACKEND & MEMORY"
		},
		{
			"id":"group_observe",
			"type":"group",
			"styleAttributes":{},
			"x":-350,
			"y":1040,
			"width":1190,
			"height":300,
			"color":"0",
			"label":"üëÅÔ∏è OBSERVABILITY & MONITORING"
		},
		{
			"id":"node_hub",
			"type":"text",
			"text":"## Foundry Hub\n\n- **Central Control Plane**\n- Manages Connections (Storage, KeyVault)\n- Aggregates Compute Quota",
			"styleAttributes":{},
			"x":140,
			"y":-40,
			"width":420,
			"height":179,
			"color":"4"
		},
		{
			"id":"node_project1",
			"type":"text",
			"text":"## Project: \"Team A\"\n\n- Logical Isolation\n- Own Experiments\n- Own Deployments",
			"styleAttributes":{},
			"x":140,
			"y":150,
			"width":200,
			"height":258,
			"color":"4"
		},
		{
			"id":"node_rbac",
			"type":"text",
			"text":"## RBAC & Identity\n\n- **Entra ID:**\n  - `Foundry Contributor` (Platform Team)\n  - `Project User` (Devs)\n- **Managed Identities:**\n  - Agents access Resources via MI (No keys!)",
			"styleAttributes":{},
			"x":100,
			"y":-900,
			"width":350,
			"height":280,
			"color":"1"
		},
		{
			"id":"node_network",
			"type":"text",
			"text":"## Network Security\n\n- **Hub VNET:**\n  - Firewall (Egress filtering)\n  - Private Endpoints (Models, Search, SQL)\n  - NSGs (Block Ingress)",
			"styleAttributes":{},
			"x":500,
			"y":-900,
			"width":350,
			"height":280,
			"color":"1"
		},
		{
			"id":"node_apim",
			"type":"text",
			"text":"## Azure API Management\n**(AI Gateway)**\n\n- Single Ingress Point\n- Hides Backend Complexity\n- **Protocols:** HTTPS / WebSocket",
			"styleAttributes":{},
			"x":-360,
			"y":-68,
			"width":370,
			"height":206,
			"color":"6"
		},
		{
			"id":"node_policy",
			"type":"text",
			"text":"## Azure Policy\n\n- **Blocking Code:**\n  - Deny unapproved regions\n  - Deny public network access\n- **Model Agreements:**\n  - Enforce \"Terms of Use\" acceptance at Management Group scope\n- **Compliance:**\n  - Require tags: `Owner`, `CostCenter`",
			"styleAttributes":{},
			"x":-360,
			"y":-935,
			"width":400,
			"height":315,
			"color":"1"
		},
		{
			"id":"node_repo",
			"type":"text",
			"text":"## Azure DevOps Repo\n\n**Structure:**\n- `/agents` (MS Agent Framework Code)\n- `/workflows` (YAML Definitions)\n- `/infra` (Bicep/Terraform)\n- `/evals` (Golden Datasets)",
			"styleAttributes":{},
			"x":-960,
			"y":-40,
			"width":420,
			"height":237,
			"color":"5"
		},
		{
			"id":"node_project2",
			"type":"text",
			"text":"## Project: \"Team B\"\n\n- Separate Billing Tag\n- Separate RBAC",
			"styleAttributes":{},
			"x":360,
			"y":150,
			"width":200,
			"height":176,
			"color":"4"
		},
		{
			"id":"node_langfuse",
			"type":"text",
			"text":"## Langfuse (Deep Tracing)\n\n- **LLM Traces:** Step-by-step logic\n- **Scores:** Quality metrics per turn\n- **Cost:** $$ per user/session",
			"styleAttributes":{},
			"x":-310,
			"y":1090,
			"width":500,
			"height":200,
			"color":"0"
		},
		{
			"id":"node_connections",
			"type":"text",
			"text":"## Connections\n\n- **Defines:**\n  - Vector Stores\n  - MCP Servers\n  - Model Endpoints",
			"styleAttributes":{},
			"x":140,
			"y":438,
			"width":420,
			"height":182,
			"color":"4"
		},
		{
			"id":"node_grafana",
			"type":"text",
			"text":"## Azure Monitor + Grafana\n\n- **Infra Metrics:** CPU, RAM, Latency\n- **APIM Metrics:** Cache Hit %, Error Rates",
			"styleAttributes":{},
			"x":250,
			"y":1090,
			"width":500,
			"height":200,
			"color":"0"
		},
		{
			"id":"node_policies",
			"type":"text",
			"text":"## Gateway Policies\n\n**1. Security:**\n- `validate-content-safety` (Block Jailbreaks)\n- PII Redaction\n\n**2. Efficiency:**\n- `lookup-cache-by-vector` (Semantic Cache)\n- Token Throttling per Project",
			"styleAttributes":{},
			"x":-360,
			"y":290,
			"width":370,
			"height":337,
			"color":"6"
		},
		{
			"id":"node_cicd",
			"type":"text",
			"text":"## CI/CD Pipelines (YAML)\n\n**Flow:**\n1. `Build`: Containerize Agent\n2. `Test`: Unit tests\n3. **`Eval`**: Run Foundry Evaluation (Groundedness Check)\n4. `Gate`: Stop if score < 0.9\n5. `Deploy`: Push to Foundry Env",
			"styleAttributes":{},
			"x":-960,
			"y":320,
			"width":420,
			"height":300,
			"color":"5"
		},
		{
			"id":"node_models",
			"type":"text",
			"text":"## Azure OpenAI / Models\n\n- GPT-4o, Phi-4\n- **Private Endpoint Only**\n- No Public Internet Access",
			"styleAttributes":{},
			"x":1960,
			"y":0,
			"width":370,
			"height":150,
			"color":"2"
		},
		{
			"id":"node_short_mem",
			"type":"text",
			"text":"## Short Term Memory\n\n- **Vector Store** (AI Search/Cosmos)\n- Semantic Cache (Redis)\n- Stores active threads",
			"styleAttributes":{},
			"x":1960,
			"y":180,
			"width":370,
			"height":150,
			"color":"2"
		},
		{
			"id":"node_long_mem",
			"type":"text",
			"text":"## Long Term Memory\n\n- **Structured DB** (SQL/Cosmos)\n- User Profiles\n- Summarized History",
			"styleAttributes":{},
			"x":1960,
			"y":360,
			"width":370,
			"height":150,
			"color":"2"
		},
		{
			"id":"node_external",
			"type":"text",
			"text":"## External APIs & SaaS\n\n- Salesforce, ServiceNow\n- Public Web",
			"styleAttributes":{},
			"x":1960,
			"y":540,
			"width":370,
			"height":150,
			"color":"2"
		},
		{
			"id":"node_agent_runtime",
			"type":"text",
			"text":"## Agent Runtime (Managed)\n\n- **Runs:** MS Agent Framework\n- **State:** Manages conversation threads\n- **Orchestration:** Decides which tool to call",
			"styleAttributes":{},
			"x":840,
			"y":-140,
			"width":520,
			"height":178,
			"color":"3"
		},
		{
			"id":"node_byod",
			"type":"text",
			"text":"## BYOD Compute (ACA)\n\n- **Azure Container Apps**\n- Custom Dockerfiles\n- Heavy processing agents",
			"styleAttributes":{},
			"x":840,
			"y":338,
			"width":250,
			"height":210,
			"color":"3"
		},
		{
			"id":"node_a2s",
			"type":"text",
			"text":"## A2S Servers (Async)\n\n- **Agent-to-Service**\n- Azure Functions / Logic Apps\n- \"Fire and Forget\" tasks",
			"styleAttributes":{},
			"x":840,
			"y":600,
			"width":520,
			"height":149,
			"color":"3"
		},
		{
			"id":"node_middleware",
			"type":"text",
			"text":"## Tools Middleware & MCP\n\n- **MCP Client:** Connects to standard data sources\n- **Sandbox:** Python Code Interpreter",
			"styleAttributes":{},
			"x":1140,
			"y":269,
			"width":250,
			"height":281,
			"color":"3"
		},
		{
			"id":"b1b8ead1da59a8e4",
			"type":"text",
			"text":"# Azure/apiops repo",
			"styleAttributes":{},
			"x":-440,
			"y":-360,
			"width":260,
			"height":117
		}
	],
	"edges":[
		{"id":"edge_policy_hub","fromNode":"node_policy","fromSide":"bottom","toNode":"node_hub","toSide":"top","label":"Enforces Compliance"},
		{"id":"edge_rbac_hub","fromNode":"node_rbac","fromSide":"bottom","toNode":"node_hub","toSide":"top","label":"Grants Access"},
		{"id":"edge_network_hub","fromNode":"node_network","fromSide":"bottom","toNode":"node_hub","toSide":"top","label":"Secures Traffic"},
		{"id":"edge_repo_cicd","fromNode":"node_repo","fromSide":"bottom","toNode":"node_cicd","toSide":"top","label":"Trigger Pipeline"},
		{"id":"edge_cicd_foundry","fromNode":"node_cicd","fromSide":"right","toNode":"node_hub","toSide":"left","label":"Deploy & Evaluate"},
		{"id":"edge_apim_policy","fromNode":"node_apim","fromSide":"bottom","toNode":"node_policies","toSide":"top","label":"Apply Logic"},
		{"id":"edge_policy_shortmem","fromNode":"node_policies","fromSide":"right","toNode":"node_short_mem","toSide":"left","label":"Lookup Cache"},
		{"id":"edge_apim_foundry","fromNode":"node_apim","fromSide":"right","toNode":"node_hub","toSide":"left","label":"Route Request"},
		{"id":"edge_hub_projects","fromNode":"node_hub","fromSide":"bottom","toNode":"node_project1","toSide":"top","label":"Contains"},
		{"id":"edge_project_runtime","fromNode":"node_project1","fromSide":"right","toNode":"node_agent_runtime","toSide":"left","label":"Hosts"},
		{"id":"edge_runtime_middleware","toFloating":false,"fromFloating":false,"fromNode":"group_compute","fromSide":"top","toNode":"node_middleware","toSide":"left","label":"Uses Tools"},
		{"id":"edge_runtime_shortmem","fromNode":"node_agent_runtime","fromSide":"right","toNode":"node_short_mem","toSide":"left","label":"Save Thread"},
		{"id":"edge_runtime_longmem","fromNode":"node_agent_runtime","fromSide":"right","toNode":"node_long_mem","toSide":"left","label":"Read Profile"},
		{"id":"edge_runtime_models","fromNode":"node_agent_runtime","fromSide":"right","toNode":"node_models","toSide":"left","label":"Inference (via Gateway)"},
		{"id":"edge_a2s_external","fromNode":"node_a2s","fromSide":"right","toNode":"node_external","toSide":"left","label":"Execute"},
		{"id":"edge_apim_monitor","fromNode":"node_apim","fromSide":"bottom","toNode":"node_grafana","toSide":"top","label":"Logs"},
		{
			"id":"d654bf1291838cd3",
			"styleAttributes":{},
			"toFloating":false,
			"fromNode":"b1b8ead1da59a8e4",
			"fromSide":"bottom",
			"toNode":"node_apim",
			"toSide":"top"
		},
		{"id":"edge_runtime_langfuse","fromNode":"node_agent_runtime","fromSide":"bottom","toNode":"node_langfuse","toSide":"top","label":"Push Traces"}
	],
	"metadata":{
		"version":"1.0-1.0",
		"frontmatter":{}
	}
}